(()=>{"use strict";var e={7143:e=>{e.exports=window.wp.data},7723:e=>{e.exports=window.wp.i18n}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};n.r(o),n.d(o,{close:()=>i,open:()=>u,requestAI:()=>O,reset:()=>l,setBlockContent:()=>T,setContext:()=>d,setLanguage:()=>g,setPrompt:()=>S,setScreen:()=>_,toggle:()=>E});var r=n(7143);const s={isOpen:!1,prompt:"",response:"",screen:"request",loading:!1,content:"",blockContent:"",onConfirm:()=>{},onCancel:()=>{}},p=window.wp.apiFetch;var c=n.n(p),a=n(7723);function u(){return{type:"OPEN"}}function i(){return{type:"CLOSE"}}function E(e=""){return{type:"TOGGLE",payload:{content:e}}}function l(){return{type:"RESET"}}function S(e){return{type:"SET_PROMPT",prompt:e}}function d(e){return{type:"SET_CONTEXT",context:e}}function g(e){return{type:"SET_LANGUAGE",language:e}}function T(e){return{type:"SET_BLOCK_CONTENT",blockContent:e}}function _(e){return{type:"SET_SCREEN",screen:e}}function O(){return({dispatch:e,select:t})=>{e({type:"REQUEST_AI_PENDING"});const n=t.getContext(),o={request:t.getPrompt()};""!==n&&(o.context=t.getBlockContent().trim()),c()({path:"/zolo/v1/openai",method:"POST",data:o}).then((t=>(e({type:"REQUEST_AI_SUCCESS",payload:t.response}),t.response))).catch((t=>{e({type:"REQUEST_AI_ERROR",payload:t?.response||t?.error_code||(0,a.__)("Something went wrong, please, try againâ€¦","zoloblocks")})}))}}const y=(0,r.createReduxStore)("zoloai/popup",{reducer:function(e=s,t){switch(t.type){case"OPEN":return{...e,isOpen:!0};case"CLOSE":return{...e,isOpen:!1};case"TOGGLE":return{...e,isOpen:!e.isOpen,content:t.payload.content};case"SET_PROMPT":return{...e,prompt:t.prompt};case"SET_BLOCK_CONTENT":return{...e,blockContent:t.blockContent};case"SET_RESPONSE":return{...e,response:t.response};case"SET_CONTEXT":return{...e,context:t.context};case"SET_SCREEN":return{...e,screen:t.screen};case"REQUEST_AI_PENDING":return{...e,loading:!0};case"REQUEST_AI_SUCCESS":return{...e,loading:!1,screen:"request",response:t.payload||""};case"REQUEST_AI_ERROR":return{...e,loading:!1,response:t.payload||""};case"RESET":return s;default:return e}},actions:o,selectors:{isOpen:e=>e.isOpen||!1,getPrompt:e=>e.prompt||"",getContext:e=>e.context||"",getResponse:e=>e.response||"",getLanguage:e=>e.language||"",isLoading:e=>e.loading||!1,getContent:e=>e.content||"",getBlockContent:e=>e.blockContent||"",getScreen:e=>e.screen||""}});(0,r.register)(y)})();