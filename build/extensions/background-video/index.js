(()=>{"use strict";const e=window.React,o=window.wp.hooks,l=((0,o.addFilter)("blocks.registerBlockType","zolo/extension/backgroundVideo",(e=>(!e.category||"zoloblocks"!=e.category||"zolo/container"!==e.name&&"zolo/slide"!==e.name||(e.attributes={...e.attributes,backgroundVideo:{type:"object"}}),e))),window.wp.blockEditor),a=window.wp.i18n,t=window.wp.components,{ImageAvatar:n}=window.zoloModule,d=({panelProps:o})=>{const{attributes:d,setAttributes:r}=o,{backgroundVideo:i={}}=d,{id:c="",url:s="",falbackImageID:u="",falbackImageURL:g=""}=i;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t.BaseControl,{label:(0,a.__)("Select Video","zoloblocks"),className:"zolo-flex-col-control"},c?(0,e.createElement)(n,{imageUrl:i&&i.url,onDeleteImage:()=>r({backgroundVideo:{...i,id:"",url:""}}),allowedTypes:["video"],imageId:i&&i.id,onEditImage:e=>{r({backgroundVideo:{...i,id:e.id,url:e.url}})}}):(0,e.createElement)(l.MediaUpload,{onSelect:e=>{e&&e.url&&e.id&&r({backgroundVideo:{...i,id:e.id,url:e.url}})},allowedTypes:["video"],value:c,render:({open:o})=>(0,e.createElement)(t.Button,{className:"zolo-image-upload-btn",onClick:o},(0,e.createElement)("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd"},(0,e.createElement)("path",{d:"M11.492 10.172l-2.5 3.064-.737-.677 3.737-4.559 3.753 4.585-.753.665-2.5-3.076v7.826h-1v-7.828zm7.008 9.828h-13c-2.481 0-4.5-2.018-4.5-4.5 0-2.178 1.555-4.038 3.698-4.424l.779-.14.043-.789c.185-3.448 3.031-6.147 6.48-6.147 3.449 0 6.295 2.699 6.478 6.147l.044.789.78.14c2.142.386 3.698 2.246 3.698 4.424 0 2.482-2.019 4.5-4.5 4.5m.978-9.908c-.212-3.951-3.472-7.092-7.478-7.092s-7.267 3.141-7.479 7.092c-2.57.463-4.521 2.706-4.521 5.408 0 3.037 2.463 5.5 5.5 5.5h13c3.037 0 5.5-2.463 5.5-5.5 0-2.702-1.951-4.945-4.522-5.408"})),(0,a.__)(" Upload Video","zoloblocks"))})),(0,e.createElement)(t.BaseControl,{label:(0,a.__)("Poster (optional)","zoloblocks"),className:"zolo-flex-col-control"},g?(0,e.createElement)(n,{imageUrl:g,imageId:u,onDeleteImage:()=>r({backgroundVideo:{...i,falbackImageURL:"",falbackImageID:""}}),onEditImage:({id:e,url:o})=>{r({backgroundVideo:{...i,falbackImageURL:o,falbackImageID:e}})}}):(0,e.createElement)(l.MediaUpload,{onSelect:e=>{e&&e.url&&e.id&&r({backgroundVideo:{...i,falbackImageURL:e.url,falbackImageID:e.id}})},allowedTypes:["image"],value:u,render:({open:o})=>(0,e.createElement)(t.Button,{className:"zolo-image-upload-btn",onClick:o},(0,e.createElement)("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd"},(0,e.createElement)("path",{d:"M11.492 10.172l-2.5 3.064-.737-.677 3.737-4.559 3.753 4.585-.753.665-2.5-3.076v7.826h-1v-7.828zm7.008 9.828h-13c-2.481 0-4.5-2.018-4.5-4.5 0-2.178 1.555-4.038 3.698-4.424l.779-.14.043-.789c.185-3.448 3.031-6.147 6.48-6.147 3.449 0 6.295 2.699 6.478 6.147l.044.789.78.14c2.142.386 3.698 2.246 3.698 4.424 0 2.482-2.019 4.5-4.5 4.5m.978-9.908c-.212-3.951-3.472-7.092-7.478-7.092s-7.267 3.141-7.479 7.092c-2.57.463-4.521 2.706-4.521 5.408 0 3.037 2.463 5.5 5.5 5.5h13c3.037 0 5.5-2.463 5.5-5.5 0-2.702-1.951-4.945-4.522-5.408"})),(0,a.__)(" Upload Image","zoloblocks"))})))};function r({panelProps:o}){const{attributes:l}=o,{backgroundVideo:a,uniqueId:t}=l;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:`zolo-bgv-container zolo-bgv-${t}`,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden"}},(0,e.createElement)("video",{className:"zolo-bgv-hosted zolo-html5-video",loop:!0,muted:!0,playsInline:!0,preload:"none",autoPlay:!0,poster:a?.falbackImageURL||"",src:a?.url||""})))}const{generateResRangeStyle:i,generateBackgroundControlStyles:c}=window.zoloModule;(0,o.addFilter)("zolo.extensions.controls.backgroundVideo","zolo/background-video",((o,l)=>(!l.attributes||"video"!==l.attributes?.advBtnBgbackgroundType&&"video"!==l.attributes?.mainBgbackgroundType||o.push((0,e.createElement)(d,{key:`controls-background-video-${l.attributes.uniqueId}`,panelProps:l})),o))),(0,o.addFilter)("zolo.blocks.render.hook.before","zolo/background-video",((o,l)=>(!l.attributes.backgroundVideo||"video"!==l.attributes?.advBtnBgbackgroundType&&"video"!==l.attributes?.mainBgbackgroundType||o.push((0,e.createElement)(r,{key:`render-background-video-${l.attributes.uniqueId}`,panelProps:l})),o)))})();