(()=>{"use strict";const e=window.wp.i18n,t=((0,e.__)("Style 1","zoloblocks"),(0,e.__)("Style 2","zoloblocks"),(0,e.__)("Style 3","zoloblocks"),(0,e.__)("Style 4","zoloblocks"),(0,e.__)("Style 5 (Pro)","zoloblocks"),(0,e.__)("Default","zoloblocks"),(0,e.__)("Background (Pro)","zoloblocks"),(0,e.__)("Underline (Pro)","zoloblocks"),(0,e.__)("Middle Underline (Pro)","zoloblocks"),(0,e.__)("Overline (Pro)","zoloblocks"),(0,e.__)("Middle Overline (Pro)","zoloblocks"),()=>{const e=document.createElement("div");return e.classList.add("preloader"),e.innerHTML='\n    <div class="container">\n      <div class="dot"></div>\n      <div class="dot"></div>\n      <div class="dot"></div>\n      <div class="dot"></div>\n      <div class="dot"></div>\n    </div>',e});document.addEventListener("DOMContentLoaded",(()=>{const e=new Map,o=new Map;function n(){let o=null;const r=async e=>{e.preventDefault();const t=e.currentTarget,n=t.dataset.id,a=t.closest(".wp-block-zolo-post-grid"),r=a?a.dataset.attributes:null,c=a.querySelector(".zolo-pagination-wrap");o=c?c.dataset.paginationtype:"",l(t),await s(a,n,r)},l=e=>{document.querySelectorAll(".wp-block-zolo-post-grid .zolo-post-filter-taxonomy a").forEach((e=>e.classList.remove("current"))),e.classList.add("current")},s=async(r,l,s)=>{const c=t(),i=r.querySelector(".zolo-post-content-wrap"),d=r.querySelector(".zolo-post-grid-wrap");if(e.has(l))return"normal"===o?d&&(d.innerHTML="",d.insertAdjacentHTML("beforeend",e.get(l))):(r.innerHTML="",r.insertAdjacentHTML("beforeend",e.get(l))),n(),void a();i&&i.appendChild(c);try{const t=new FormData;t.append("action","zolo_ajax_post_pagination"),t.append("postTermId",l),t.append("settings",s),t.append("zolo_nonce",zoloSettings.zolo_nonce);const c=await fetch(zoloSettings.ajaxurl,{method:"POST",body:t}),i=await c.json();if(i.success){if(o&&"normal"===o){d.innerHTML="";const t=document.createElement("div");t.innerHTML=i.data;const o=t.querySelector(".zolo-post-grid-wrap");o&&(d.insertAdjacentHTML("beforeend",o.innerHTML),e.set(l,o.innerHTML))}else r.innerHTML="",r.insertAdjacentHTML("beforeend",i.data),e.set(l,i.data);n(),a()}else console.error("Failed to fetch content:",i)}catch(e){console.error("Error:",e)}finally{i&&i.removeChild(c)}};document.querySelectorAll(".wp-block-zolo-post-grid .zolo-post-filter-taxonomy a").forEach((e=>{e.addEventListener("click",r)}))}function a(){const e="zolo-pagination-wrap";let a=null,r=null,l=!1;const s=async(r,s,i,d=!1)=>{if(d&&o.has(s)){const e=o.get(s);return r.innerHTML="",r.insertAdjacentHTML("beforeend",e),n(),void c()}const p=t(),u=r.querySelector(".zolo-post-content-wrap"),f=r.querySelector(`.${e}`),b=r.querySelector(".zolo-post-filter-taxonomy .current"),m=b?b.dataset.id:"";u&&u.appendChild(p);try{const e=new FormData;e.append("action","zolo_ajax_post_pagination"),e.append("pageNumber",s),e.append("settings",i),e.append("zolo_nonce",zoloSettings.zolo_nonce),e.append("postTermId",m);const t=await fetch(zoloSettings.ajaxurl,{method:"POST",body:e}),l=await t.json();if(l.success){if(d&&o.set(s,l.data),"number"===a&&(r.innerHTML="",r.insertAdjacentHTML("beforeend",l.data),n(),c()),"button"===a||"scroll"===a){const e=document.createElement("div");e.innerHTML=l.data;const t=e.querySelectorAll(".zolo-post-item");t.length>0?t.forEach((e=>{u.appendChild(e)})):f.innerHTML=""}}else console.error("Failed to fetch content:",l)}catch(e){console.error("Error fetching content:",e)}finally{u&&u.removeChild(p),l=!1}},c=()=>{document.querySelectorAll(`.${e}`).forEach(f)},i=async t=>{if(t.preventDefault(),l)return;l=!0;const o=t.target.getAttribute("href");if(!o)return;const n=(e=>e.includes("admin-ajax.php")?e.match(/admin-ajax.*/)?.[0]||"":e.match(/\/page\/\d+\//)?.[0]||"")(o),c=(e=>{const t=e.match(/\d+/);return t?parseInt(t[0],10):1})(n);r=t.target.closest(`.${e}`).dataset.blockname,a=t.target.closest(`.${e}`).dataset.paginationtype;const i=t.target.closest(`.wp-block-zolo-${r}`);if(i){const e=i.dataset.attributes;await s(i,c,e,!0),l=!1}},d=(e,t)=>{e.forEach((e=>e.addEventListener("click",t)))},p=e=>{const t=e.querySelector(".zolo-pagination-button");if(t){let o=parseInt(t.dataset.pagenumber,10)||1;t.addEventListener("click",(async n=>{if(n.preventDefault(),l)return;l=!0,t.classList.add("loading"),o+=1,a=e.dataset.paginationtype,r=e.dataset.blockname;const c=n.target.closest(`.wp-block-zolo-${r}`);if(c){const e=c.dataset.attributes;await s(c,o,e),l=!1,t.classList.remove("loading")}}))}},u=e=>{let t=parseInt(e.dataset.pagenumber,10)||1;a=e.dataset.paginationtype,r=e.dataset.blockname;const o=e.dataset.totalpage;window.addEventListener("scroll",(()=>{if(!l&&window.scrollY+window.innerHeight>=document.documentElement.offsetHeight-200){const n=e.closest(`.wp-block-zolo-${r}`);if(n){const e=n.dataset.attributes;t+=1,l=!0,o>=t&&s(n,t,e)}}}))};function f(e){switch(a=e.dataset.paginationtype,r=e.dataset.blockname,a){case"normal":break;case"number":d(e.querySelectorAll("a"),i);break;case"button":p(e);break;case"scroll":u(e)}}document.querySelectorAll(`.${e}`).forEach(f)}n(),a()}))})();