{"version":3,"file":"blocks/newsletter/frontend.js","mappings":"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","sources":["webpack://zoloblocks/./src/blocks/newsletter/frontend.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function () {\n    const newsLetterForms = document.querySelectorAll('.wp-block-zolo-newsletter');\n\n    const createNotice = (form, message, status) => {\n        if (form?.nextElementSibling?.classList.contains('zolo-newsletter-message')) {\n            form.nextElementSibling.remove();\n        }\n\n        const noticeDiv = document.createElement('div');\n        noticeDiv.className = 'zolo-newsletter-message';\n        noticeDiv.innerHTML = `<span id=\"zolo-newsletter-info-text\" class=\"zolo-newsletter-info-text status-${status}\">${message}</span>`;\n        form.append(noticeDiv);\n    };\n\n    if (newsLetterForms.length > 0) {\n        newsLetterForms.forEach((form) => {\n            form.addEventListener('submit', function (e) {\n                e.preventDefault();\n\n                // Input Validation\n                const emailField = form.querySelector('#zolo-newsletter-email-field');\n                const email = emailField ? emailField.value.trim() : '';\n                let fname = '';\n                const nameField = form.querySelector('#zolo-newsletter-name-field');\n                if (nameField) {\n                    fname = nameField.value.trim();\n                }\n\n                if (!email) {\n                    createNotice(form, 'Please enter a valid email address.', 'error');\n                    return;\n                }\n\n                const newsletterMsg = form.querySelector('.zolo-newsletter-form')?.dataset.settings || '';\n\n                const data = new FormData();\n                data.append('email', email);\n                data.append('fname', fname);\n                data.append('action', 'zolo_subscribe_newsletter');\n                data.append('nonce', zoloSettings.zolo_nonce);\n                data.append('data', newsletterMsg);\n\n                // Send the AJAX request\n                fetch(zoloSettings.ajaxurl, {\n                    method: 'POST',\n                    body: data,\n                    credentials: 'same-origin',\n                    headers: {\n                        'X-Requested-With': 'XMLHttpRequest', // Prevent CSRF attacks\n                    },\n                })\n                    .then((response) => {\n                        if (!response.ok) {\n                            throw new Error('Network response was not ok');\n                        }\n                        return response.json();\n                    })\n                    .then((responseData) => {\n                        if (responseData.status === 'success') {\n                            emailField.value = '';\n                            if (nameField) nameField.value = '';\n\n                            createNotice(form, responseData.message, 'success');\n                        } else {\n                            createNotice(form, responseData.message, 'error');\n                        }\n                    })\n                    .catch((error) => {\n                        createNotice(form, `An error occurred: ${error.message}`, 'error');\n                    });\n            });\n        });\n    }\n});\n"],"names":["document","addEventListener","newsLetterForms","querySelectorAll","createNotice","form","message","status","nextElementSibling","classList","contains","remove","noticeDiv","createElement","className","innerHTML","append","length","forEach","e","preventDefault","emailField","querySelector","email","value","trim","fname","nameField","newsletterMsg","dataset","settings","data","FormData","zoloSettings","zolo_nonce","fetch","ajaxurl","method","body","credentials","headers","then","response","ok","Error","json","responseData","catch","error"],"sourceRoot":""}